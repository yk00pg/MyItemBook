## はじめに
- 本リポジトリは、Java学習者の「ゆうき」（Xアカウント： [@yk00pg](https://x.com/yk00pg)）が作成したMinecraftプラグイン『MyItemBook（Myアイテム図鑑）』に関するものです
- ご利用いただくことによるトラブル等につきましては、一切の責任を負いかねますことを予めご了承ください
<br/>

## コンセプト
- アイテムに表示名や説明文を付けられることを知り、それをまとめて図鑑のようにできたら面白いのではないかと思い作成しました
- 数多くのアイテムが存在するMinecraftの世界で、自分だけの図鑑を作成しながらコレクションを楽しむことができます
<br/>

## 概要
- ゲーム内で入手したアイテムを図鑑に登録し、詳細情報を追加していくことでオリジナルの図鑑を作成することができます
- コマンド `/itembook` を実行することで、アイテム図鑑GUIを表示することができます
- アイテム図鑑のデータは、初回ログイン時に生成されるYAMLファイルに保存されます
<br/>

## 想定ユーザー
- アイテム収集を楽しみたいベテランプレイヤー
- 入手したアイテムの情報をゲーム内で確認できるようにメモしておきたい初心者プレイヤー（ちなみに私はこちらです）
<br/>

## 環境
- 開発言語: Java Oracle OpenJDK 21.0.9
- アプリケーション: Minecraft 1.21.4
- サーバー: Spigot 1.21.4
- 検証済みOS: Mac OS Sequoia 15.4.1 (24E2653)
<br/>

## 導入方法
- Minecraftサーバーを用意してください
- gradle shadowJarなどで本プラグインのfat Jarファイルを作成してください
- ご自身のMinecraftサーバーの「_plugins_」フォルダに作成したfat Jarファイルを追加してください
- サーバーおよびMinecraftを起動してください
<br/>

## 遊び方
### ＊ アイテムを図鑑に登録する
- アイテムを入手（拾得/クラフト）した際、入手したアイテムが未登録であれば自動で図鑑に登録されます
<br/>

https://github.com/user-attachments/assets/29599c73-3e4d-4bc4-acd2-50f3d518360b

<br/>

### ＊ 図鑑に登録されたアイテムに詳細情報を登録する
- 図鑑に登録された時点では、アイテムの情報は【素材名】しか登録されておりません
- 詳細情報：【表示名】、【説明文】、【カテゴリ】、【入手難易度】、【入手方法】、【使い方】、【メモ】を追加し、内容を充実させましょう！
<br/>

 ≪ **登録/編集方法** ≫
1. コマンド`/itembook`を入力し、アイテム図鑑を開きます
2. 一覧画面で詳細情報を登録したいアイテムをクリックし、アイテムの詳細画面を開きます
3. 登録したい詳細情報の項目アイコンをクリックします
4. チャット欄に登録したい内容を入力し、送信します\
※ 登録を中止する場合は「cancel」、登録済みの内容を削除する場合は「delete」と入力してください
<br/>

https://github.com/user-attachments/assets/ab2139ed-981d-4e50-bc81-97c38858ea92

<br/>

### ＊ 図鑑に登録されたアイテムの詳細情報を確認する
 ≪ **確認方法** ≫
1. コマンド`/itembook`を入力し、アイテム図鑑を開きます
2. 一覧画面では、アイテムをホバーすることで登録した【表示名】と【説明文】を確認することができます
3. 詳細情報を確認したいアイテムをクリックし、アイテムの詳細画面を開きます
4. アイテムの詳細画面では、詳細情報の項目アイコンをホバーすることで登録した詳細情報を確認することができます
<br/>

https://github.com/user-attachments/assets/32bf0719-5c44-4dba-a34e-395e184eb3ab

<br/>

### ＊ アイテム図鑑のメニュー
- **くるりとまるまりデータ保存**
  - アイテム図鑑のデータをYAMLファイルに保存します
- **ルンルン踊って一覧表示**
  - アイテム図鑑の一覧画面を素材名順（昇順=デフォルト）に並び替えて表示します
- **ブンブンせっせと登録順に並び替え**
  - アイテム図鑑の一覧画面を登録順（降順=新たに登録された順）に並び替えて表示します
- **のんびりのろのろ前へ戻る**
  - 一覧画面では前のページを、アイテムの詳細画面では前のアイテムを表示します
- **ぴょんぴょん次へ飛び跳ねる**
  - 一覧画面では次のページを、アイテムの詳細画面では次のアイテムを表示します
- **バシャバシャ一覧画面に戻る**
  - アイテムの詳細画面から直前に開いていた一覧画面に戻ります
- **パタパタンと図鑑を閉じる**
  - アイテム図鑑を閉じます
<br/>
    
### ＊ おすすめの使い方一例
- アイテムの詳細情報に座標をメモしておき、テレポート（公式コマンド`/tp`）に使用する
> - 例： ベッド（WHITE_BEDなど）の【メモ】にリスポーン地点を登録しておけば、迷子になってもお家に帰れるので安心！
> - 例： 遠出をした先で貴重なアイテムをゲット！ アイテムの【メモ】に座標を登録しておけば、いつでもそこに戻れます
<br/>

## 注意事項
- 初回ログイン時に「_plugins_」フォルダに本プラグインのデータフォルダ「_MyitemBook_」およびアイテム図鑑のデータファイル「_xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx(プレイヤーのUUID).yml_」が生成されます
- データフォルダやデータファイルの名称、データファイル内の構造（フィールド名等）や_materialフィールド_の値（素材名）は絶対に変更しないでください
- クラフトでアイテムを入手する場合、クラフト後のアイテムを持ち上げた瞬間に登録判定が開始されるため、クラフト前にインベントリスロットに空きがあることをご確認ください
<br/>

## 工夫したところ
- **プレイヤーの視点での設計**（実際にプレイして、こうだったら良いなと思った部分をコードに落とし込みました）
  - クラフト時にはインベントリを開いておりメッセージが見えないため、インベントリを自動で閉じて図鑑への登録メッセージが見えるようにしました
  - Minecraftの操作性を損なわないように、アイテム入手時には図鑑への登録のみを自動で行い、アイテムの詳細情報の追加登録はプレイヤーが好きなタイミングで能動的に行えるようにしています
  - アイテム図鑑の一覧画面では、未登録のアイテムをBEDROCKで表現することで、どんどん図鑑を埋めていきたい！といったモチベーションを高められるようにしました
  - アイテム図鑑にメニューアイコンを設置してクリックイベントを活用することで、直感的に操作できるようにしています
  - メニューアイコンや詳細情報の項目アイコンには、サバイバルモードでは入手できないスポーンエッグを使用し、スロットを1行分空けて設置することで、図鑑の登録済みアイテムと区別できるようにしました
  - 採用したスポーンエッグの特性や動作に因んだ擬音を含めた表記にすることで、遊び心を加えたメニュー名にしました
  - アイテムの詳細情報の登録/削除/キャンセル後に、自動で開いていた詳細画面に戻ることで、続けて操作ができるようにしています
  - アイテムの詳細画面に「一覧画面に戻る」メニューを設置することで、1ページ目ではなく直前に開いていたページに戻れるようにしました
- **可読性と保守性の高いコード設計**
  - トリガーとなるコマンドやイベントのクラスと実処理を行うクラスを分けることで、各クラスの責任や役割が明確になるように意識しました
  - クラス内部においても、各機能ごとにメソッドを細分化することで、各メソッドの責任や役割が明確になるように意識しました
  - アイテム入手後の登録判定から図鑑への登録までの一連の処理や、アイテム図鑑の設定など、繰り返し実施され得る処理については共通のメソッドを使用することで、更新や変更がしやすくなるようにしました
  - アイテム図鑑のメニューはenumクラスで一元管理し、将来的な拡張も考慮した設計を心がけました
- **効率的で安定したデータ管理設計**
  - プレイヤーごとのアイテム図鑑データをYAMLファイルで管理することで、DBなどの事前設定不要でプレイでき、サーバーの再起動後もデータが保持されるようにしています
  - YAMLファイルの読み込みはログイン時のみ行い、Map<UUID, PlayerData>の形でメモリ上に保持することで高速でアクセスできるようにしました
  - YAMLファイルへの書き込みと保存はログアウト時に行うほか、アイテム図鑑の保存メニューからも行えるようにすることで、長時間でも安心してプレイできるようにしました
  - YAMLファイルへの保存に失敗した場合には、エラーメッセージとアイテム図鑑データの中身をログ出力することで、プレイヤーが内容を確認して再登録できるようにしています
<br/>

## 今後実装予定の機能
- 図鑑登録済みアイテムの検索機能
- 図鑑のフィルター表示機能
- かまど、焚き火、釣りなどでのアイテム入手に対応
- コレクションの進捗状況（コンプリート状況）に応じた称号付与
<br/>

## おわりに
- Java学習のアウトプットとして、本リポジトリを公開させていただきました
- ご感想やコメントなどがございましたら、[Xアカウント](https://x.com/yk00pg)までご連絡いただけますと幸いです
<br/>

最後までお読みいただきありがとうございました。
